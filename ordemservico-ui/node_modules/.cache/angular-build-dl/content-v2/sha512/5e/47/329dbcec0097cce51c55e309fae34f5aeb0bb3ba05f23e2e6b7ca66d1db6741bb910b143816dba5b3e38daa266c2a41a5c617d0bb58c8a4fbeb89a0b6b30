(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{v9ag:function(e,o,t){"use strict";t.r(o),t.d(o,"PessoasModule",(function(){return x}));var s=t("ofXK"),a=t("PCNd"),n=t("3Pt+"),i=t("arFO"),r=t("rEr+"),c=t("xlun"),l=t("tyNb"),b=t("G/4H"),d=t("fXoL"),p=t("7zfz"),u=t("DLzb"),g=t("jhN1"),h=t("Tulk");const m=["tabela"];function f(e,o){1&e&&(d.Qb(0,"tr"),d.Qb(1,"th",16),d.Ac(2,"CPF"),d.Pb(),d.Qb(3,"th",17),d.Ac(4,"Nome"),d.Pb(),d.Qb(5,"th",16),d.Ac(6,"Telefone"),d.Pb(),d.Qb(7,"th",18),d.Ac(8,"Estado"),d.Pb(),d.Qb(9,"th",19),d.Ac(10,"..."),d.Pb(),d.Pb())}function P(e,o){if(1&e){const e=d.Rb();d.Qb(0,"button",24),d.Xb("click",(function(){d.sc(e);const o=d.Zb().$implicit;return d.Zb().confirmarExclusao(o)})),d.Qb(1,"i",22),d.Ac(2,"delete_forever"),d.Pb(),d.Pb()}}const v=function(e){return["/pessoas",e]};function Q(e,o){if(1&e&&(d.Qb(0,"tr",20),d.Qb(1,"td"),d.Ac(2),d.Pb(),d.Qb(3,"td"),d.Ac(4),d.Pb(),d.Qb(5,"td"),d.Ac(6),d.Pb(),d.Qb(7,"td"),d.Ac(8),d.Pb(),d.Qb(9,"td"),d.Qb(10,"a",21),d.Qb(11,"i",22),d.Ac(12,"edit"),d.Pb(),d.Pb(),d.yc(13,P,3,0,"button",23),d.Pb(),d.Pb()),2&e){const e=o.$implicit,t=d.Zb();d.zb(2),d.Bc(e.cpf),d.zb(2),d.Bc(e.nome),d.zb(2),d.Bc(e.telefone),d.zb(2),d.Bc(e.endereco.cidade.estado.nome),d.zb(2),d.fc("routerLink",d.ic(6,v,e.id)),d.zb(3),d.fc("ngIf",t.segurancaService.temPermissao("ROLE_REMOVER_PESSOA"))}}function M(e,o){1&e&&(d.Qb(0,"tr"),d.Qb(1,"td",25),d.Ac(2,"Nenhum Pessoa encontrada..."),d.Pb(),d.Pb())}let A=(()=>{class e{constructor(e,o,t,s,a,n){this.pessoasService=e,this.confirmationService=o,this.messageService=t,this.errorHandler=s,this.title=a,this.segurancaService=n,this.pessoas=[],this.pessoasFilter=new b.a,this.totalRegistros=0}ngOnInit(){this.title.setTitle("Pesquisa de Pessoas")}pesquisar(e=0){this.pessoasFilter.pagina=e,this.pessoasService.pesquisarPessoas(this.pessoasFilter).then(e=>{this.pessoas=e.pessoas,this.totalRegistros=e.total})}aoMudarPagina(e){this.pesquisar(e.first/e.rows)}confirmarExclusao(e){this.confirmationService.confirm({message:"Tem certeza que deseja remover "+e.nome+"?",accept:()=>{this.excluir(e)}})}excluir(e){this.pessoasService.excluirPessoa(e.id).then(()=>{this.grid.reset(),this.messageService.add({severity:"success",detail:"Pessoa exclu\xedda com sucesso."})}).catch(e=>this.errorHandler.handle(e))}}return e.\u0275fac=function(o){return new(o||e)(d.Kb(b.b),d.Kb(p.a),d.Kb(p.d),d.Kb(u.a),d.Kb(g.b),d.Kb(h.a))},e.\u0275cmp=d.Eb({type:e,selectors:[["app-pessoas-pesquisa"]],viewQuery:function(e,o){var t;1&e&&d.wc(m,!0),2&e&&d.qc(t=d.Yb())&&(o.grid=t.first)},decls:30,vars:7,consts:[[1,"container"],[1,"col","s12"],[1,"row"],[3,"ngSubmit"],[1,"input-field","col","s8"],["type","text","name","nome",3,"ngModel","keyup","ngModelChange"],["for",""],["type","submit",1,"btn","waves-effect","waves-light","btn-small"],[1,"material-icons","right"],[3,"value","paginator","responsive","rows","lazy","totalRecords","onLazyLoad"],["tabela",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"col","s3","offset-s9"],["routerLink","/pessoas/novo",1,"botao-margin","btn","waves-effect","waves-light","btn-small"],[1,"td-cpf"],[1,"td-nome"],[1,"td-estado"],[1,"td-botoes"],[1,"linha-body"],["pTooltip","Editar","tooltipPosition","top",1,"btn","waves-effect","waves-light","btn-medium",3,"routerLink"],[1,"material-icons","center"],["class","td-botoes-margin btn waves-effect waves-light btn-medium","pTooltip","Excluir","tooltipPosition","bottom",3,"click",4,"ngIf"],["pTooltip","Excluir","tooltipPosition","bottom",1,"td-botoes-margin","btn","waves-effect","waves-light","btn-medium",3,"click"],["colspan","6"]],template:function(e,o){1&e&&(d.Qb(0,"div",0),d.Qb(1,"div",1),d.Qb(2,"h1"),d.Ac(3," Lista de Pessoas "),d.Pb(),d.Pb(),d.Qb(4,"div",2),d.Qb(5,"form",3),d.Xb("ngSubmit",(function(){return o.pesquisar()})),d.Qb(6,"div",2),d.Qb(7,"div",4),d.Qb(8,"input",5),d.Xb("keyup",(function(){return o.pesquisar()}))("ngModelChange",(function(e){return o.pessoasFilter.nome=e})),d.Pb(),d.Qb(9,"label",6),d.Ac(10,"Nome"),d.Pb(),d.Pb(),d.Pb(),d.Qb(11,"div",2),d.Qb(12,"div",1),d.Qb(13,"button",7),d.Qb(14,"i",8),d.Ac(15,"search"),d.Pb(),d.Ac(16," Pesquisar "),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(17,"div",2),d.Qb(18,"div",1),d.Qb(19,"p-table",9,10),d.Xb("onLazyLoad",(function(e){return o.aoMudarPagina(e)})),d.yc(21,f,11,0,"ng-template",11),d.yc(22,Q,14,8,"ng-template",12),d.yc(23,M,3,0,"ng-template",13),d.Pb(),d.Pb(),d.Pb(),d.Qb(24,"div",2),d.Qb(25,"div",14),d.Qb(26,"button",15),d.Qb(27,"i",8),d.Ac(28,"add_circle"),d.Pb(),d.Ac(29," Nova Pessoa "),d.Pb(),d.Pb(),d.Pb(),d.Pb()),2&e&&(d.zb(8),d.fc("ngModel",o.pessoasFilter.nome),d.zb(11),d.fc("value",o.pessoas)("paginator",!0)("responsive",!0)("rows",o.pessoasFilter.itensPorPagina)("lazy",!0)("totalRecords",o.totalRegistros))},directives:[n.l,n.h,n.i,n.a,n.g,n.j,r.a,p.e,l.c,l.d,c.a,s.m],styles:[""]}),e})();var S=t("uEA4"),y=t("oA9F");let z=(()=>{class e{constructor(e,o,t,s,a,n){this.pessoasService=e,this.messageService=o,this.errorHandler=t,this.router=s,this.actRoute=a,this.title=n,this.pessoa=new S.b}ngOnInit(){this.title.setTitle("Nova Pessoa"),this.carregarEstados();const e=this.actRoute.snapshot.params.id;e&&this.carregarPessoa(e)}get editando(){return Boolean(this.pessoa.id)}carregarEstados(){this.pessoasService.listarEstados().then(e=>{this.estados=e.map(e=>({label:e.nome,value:e.id}))}).catch(e=>this.errorHandler.handle(e))}carregarCidades(){this.pessoasService.pesquisarCidades(this.estadoSelecionado).then(e=>{this.cidades=e.map(e=>({label:e.nome,value:e.id}))}).catch(e=>this.errorHandler.handle(e))}novo(e){e.reset(),setTimeout((function(){this.pessoa=new S.b}).bind(this),1),this.router.navigate(["/pessoas/novo"])}salvar(e){this.editando?this.atualizar(e):this.adicionar(e)}adicionar(e){this.pessoasService.adicionarPessoa(this.pessoa).then(e=>{this.messageService.add({severity:"success",detail:"Pessoa adicionada com sucesso."}),this.router.navigate(["/pessoas",e.id])}).catch(e=>this.errorHandler.handle(e))}carregarPessoa(e){this.pessoasService.buscarPessoaPorId(e).then(e=>{this.pessoa=e,this.estadoSelecionado=this.pessoa.endereco.cidade?this.pessoa.endereco.cidade.estado.id:null,this.estadoSelecionado&&this.carregarCidades(),this.atualizarTituloEdicao()})}atualizar(e){this.pessoasService.atualizarPessoa(this.pessoa).then(e=>{this.pessoa=e,this.messageService.add({severity:"success",detail:"Pessoa atualizada com sucesso."}),this.atualizarTituloEdicao()}).catch(e=>this.errorHandler.handle(e))}atualizarTituloEdicao(){this.title.setTitle("Edi\xe7\xe3o de Pessoa: "+this.pessoa.nome)}testar(e){this.messageService.add({severity:"info",detail:"Teste de inser\xe7\xe3o de Pessoa.."})}}return e.\u0275fac=function(o){return new(o||e)(d.Kb(b.b),d.Kb(p.d),d.Kb(u.a),d.Kb(l.b),d.Kb(l.a),d.Kb(g.b))},e.\u0275cmp=d.Eb({type:e,selectors:[["app-pessoas-cadastro"]],decls:81,vars:22,consts:[[1,"container"],[1,"row"],["id","formPessoa",3,"ngSubmit"],["formPessoa","ngForm"],[1,"col","s12"],[1,"input-field","col","s12","l8","offset-l4","pull-l4"],["type","text","name","nome","required","","minlength","4",3,"ngModel","ngModelChange"],["nome","ngModel"],["error","required","text","Nome \xe9 obrigat\xf3rio!",3,"control"],["error","minlength",3,"control","text"],[1,"input-field","col","s6","l3"],["type","text","name","cpf","id","cpf","maxlength","14","onKeyPress","criarMascara('###.###.###-##', this)",3,"ngModel","ngModelChange"],["cpf","ngModel"],[1,"input-field","col","s6","l3","offset-l6","pull-l6"],["type","text","name","telefone","required","","maxlength","13","minlength","12","OnKeyPress","criarMascara('(##)#########', this)",3,"ngModel","ngModelChange"],["telefone","ngModel"],["error","required","text","Telefone \xe9 obrigat\xf3rio! Ex: DDD99999-9999",3,"control"],["error","minlength","text","Ex: DDD99999-9999",3,"control"],[1,"input-field","col","s6","l3","offset-l5","pull-l5"],["type","text","name","cep","id","cep","maxlength","9","OnKeyPress","criarMascara('#####-###', this)",3,"ngModel","ngModelChange"],["cep","ngModel"],["id","errorCep",3,"control"],[1,"input-field","col","s12","l8"],["type","text","name","logradouro","id","rua",3,"ngModel","ngModelChange"],["logradouro","ngModel"],[1,"margin-label-endereco"],[1,"input-field","col","s4"],["type","text","name","numero",3,"ngModel","ngModelChange"],["numero","ngModel"],["type","text","name","complemento",3,"ngModel","ngModelChange"],["complemento","ngModel"],[1,"input-field","col","s8","l4","offset-l4","pull-l4"],["type","text","name","bairro","id","bairro",3,"ngModel","ngModelChange"],["bairro","ngModel"],[1,"col","s8","l4","margin-estado"],[1,"font-label"],["name","estadoSelecionado","placeholder","Selecione...","filter","true","required","",3,"ngModel","options","ngModelChange","onChange"],["estado","ngModel"],["error","required","text","Informe um Estado",3,"control"],[1,"col","s8","l4"],["name","cidade","placeholder","Selecione...","filter","true","required","",3,"ngModel","options","disabled","ngModelChange"],["cidade","ngModel"],[1,"col","s4","l2"],["type","button",1,"btn","waves-effect","waves-light","btn-small",3,"click"],[1,"material-icons","right"],["type","submit",1,"botao-margin-salvar","btn","waves-effect","waves-light","btn-small",3,"disabled"],[1,"col","s4","l2","offset-l6"],["routerLink","/pessoas",1,"botao-margin-voltar","btn","waves-effect","waves-light","btn-small"]],template:function(e,o){if(1&e){const e=d.Rb();d.Qb(0,"div",0),d.Qb(1,"div",1),d.Qb(2,"form",2,3),d.Xb("ngSubmit",(function(){d.sc(e);const t=d.rc(3);return o.salvar(t)})),d.Qb(4,"div",1),d.Qb(5,"div",4),d.Qb(6,"h1"),d.Ac(7),d.Pb(),d.Pb(),d.Qb(8,"div",5),d.Qb(9,"input",6,7),d.Xb("ngModelChange",(function(e){return o.pessoa.nome=e})),d.Pb(),d.Qb(11,"label"),d.Ac(12," Nome "),d.Pb(),d.Lb(13,"app-message",8),d.Lb(14,"app-message",9),d.Pb(),d.Qb(15,"div",10),d.Qb(16,"input",11,12),d.Xb("ngModelChange",(function(e){return o.pessoa.cpf=e})),d.Pb(),d.Qb(18,"label"),d.Ac(19," CPF "),d.Pb(),d.Pb(),d.Qb(20,"div",13),d.Qb(21,"input",14,15),d.Xb("ngModelChange",(function(e){return o.pessoa.telefone=e})),d.Pb(),d.Qb(23,"label"),d.Ac(24," Telefone "),d.Pb(),d.Lb(25,"app-message",16),d.Lb(26,"app-message",17),d.Pb(),d.Qb(27,"div",18),d.Qb(28,"input",19,20),d.Xb("ngModelChange",(function(e){return o.pessoa.endereco.cep=e})),d.Pb(),d.Qb(30,"label"),d.Ac(31," CEP "),d.Pb(),d.Lb(32,"app-message",21),d.Pb(),d.Qb(33,"div",22),d.Qb(34,"input",23,24),d.Xb("ngModelChange",(function(e){return o.pessoa.endereco.logradouro=e})),d.Pb(),d.Qb(36,"label",25),d.Ac(37," Endere\xe7o "),d.Pb(),d.Pb(),d.Qb(38,"div",26),d.Qb(39,"input",27,28),d.Xb("ngModelChange",(function(e){return o.pessoa.endereco.numero=e})),d.Pb(),d.Qb(41,"label"),d.Ac(42," N\xfamero "),d.Pb(),d.Pb(),d.Qb(43,"div",26),d.Qb(44,"input",29,30),d.Xb("ngModelChange",(function(e){return o.pessoa.endereco.complemento=e})),d.Pb(),d.Qb(46,"label"),d.Ac(47," Complemento "),d.Pb(),d.Pb(),d.Qb(48,"div",31),d.Qb(49,"input",32,33),d.Xb("ngModelChange",(function(e){return o.pessoa.endereco.bairro=e})),d.Pb(),d.Qb(51,"label"),d.Ac(52," Bairro "),d.Pb(),d.Pb(),d.Qb(53,"div",1),d.Qb(54,"div",34),d.Qb(55,"label",35),d.Ac(56," Estado: "),d.Pb(),d.Qb(57,"p-dropdown",36,37),d.Xb("ngModelChange",(function(e){return o.estadoSelecionado=e}))("onChange",(function(){return o.carregarCidades()})),d.Pb(),d.Lb(59,"app-message",38),d.Pb(),d.Qb(60,"div",39),d.Qb(61,"label",35),d.Ac(62," Cidade: "),d.Pb(),d.Qb(63,"p-dropdown",40,41),d.Xb("ngModelChange",(function(e){return o.pessoa.endereco.cidade.id=e})),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(65,"div",1),d.Qb(66,"div",42),d.Qb(67,"button",43),d.Xb("click",(function(){d.sc(e);const t=d.rc(3);return o.novo(t)})),d.Qb(68,"i",44),d.Ac(69,"person_add"),d.Pb(),d.Ac(70," Novo "),d.Pb(),d.Pb(),d.Qb(71,"div",42),d.Qb(72,"button",45),d.Qb(73,"i",44),d.Ac(74,"send"),d.Pb(),d.Ac(75," Salvar "),d.Pb(),d.Pb(),d.Qb(76,"div",46),d.Qb(77,"a",47),d.Qb(78,"i",44),d.Ac(79,"subdirectory_arrow_left"),d.Pb(),d.Ac(80," Voltar "),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Pb()}if(2&e){const e=d.rc(3),t=d.rc(10),s=d.rc(22),a=d.rc(29),n=d.rc(58);d.zb(7),d.Cc(" ",o.editando?"Edi\xe7\xe3o de":"Nova"," Pessoa "),d.zb(2),d.fc("ngModel",o.pessoa.nome),d.zb(4),d.fc("control",t),d.zb(1),d.gc("text","M\xednimo de ",null==t.errors||null==t.errors.minlength?null:t.errors.minlength.requiredLength," caracteres!"),d.fc("control",t),d.zb(2),d.fc("ngModel",o.pessoa.cpf),d.zb(5),d.fc("ngModel",o.pessoa.telefone),d.zb(4),d.fc("control",s),d.zb(1),d.fc("control",s),d.zb(2),d.fc("ngModel",o.pessoa.endereco.cep),d.zb(4),d.fc("control",a),d.zb(2),d.fc("ngModel",o.pessoa.endereco.logradouro),d.zb(5),d.fc("ngModel",o.pessoa.endereco.numero),d.zb(5),d.fc("ngModel",o.pessoa.endereco.complemento),d.zb(5),d.fc("ngModel",o.pessoa.endereco.bairro),d.zb(8),d.fc("ngModel",o.estadoSelecionado)("options",o.estados),d.zb(2),d.fc("control",n),d.zb(4),d.fc("ngModel",o.pessoa.endereco.cidade.id)("options",o.cidades)("disabled",!o.estadoSelecionado),d.zb(9),d.fc("disabled",!e.valid)}},directives:[n.l,n.h,n.i,n.a,n.k,n.e,n.g,n.j,y.a,n.d,i.a,l.d],styles:[""]}),e})();var w=t("AQzz");const C=[{path:"",component:A,canActivate:[w.a],data:{roles:["ROLE_PESQUISAR_PESSOA"]}},{path:"novo",component:z,canActivate:[w.a],data:{roles:["ROLE_CADASTRAR_PESSOA"]}},{path:":id",component:z,canActivate:[w.a],data:{roles:["ROLE_CADASTRAR_PESSOA"]}}];let E=(()=>{class e{}return e.\u0275mod=d.Ib({type:e}),e.\u0275inj=d.Hb({factory:function(o){return new(o||e)},imports:[[s.b,l.e.forChild(C)],l.e]}),e})(),x=(()=>{class e{}return e.\u0275mod=d.Ib({type:e}),e.\u0275inj=d.Hb({factory:function(o){return new(o||e)},imports:[[s.b,n.c,E,a.a,r.b,i.b,c.b]]}),e})()}}]);